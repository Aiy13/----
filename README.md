# 编译原理项目（第二版）

## 当前进展

- **已完成：**
  - 词法分析模块
  - 语法分析模块
  - 语义分析模块
  - `if` 与 `while` 控制结构的整体框架
  - 表达式解析与验证
  - 表达语句完善
  - 赋值语句处理逻辑

- **未完成：**
  - 中间代码模块暂未得到详细的测试

## 文件说明

本次上传的为第六版代码，包含以下内容：

- 主要源代码（Python 实现）
- 若干用于测试的输入代码样例
- 语法分析框架中 `if`、`while`、赋值、表达式等语句的处理逻辑
- 基于手写 LL(1)/递归下降的语法分析流程
- 静态语义检查(基于语法树生成的ast)
- 中间代码生成(基于语法树生成的ast)

## 模块说明

- `cifa.py`：词法分析器，实现了基础的单词识别与分类
- `yufa.py`：语法分析器，包含对程序结构和语句的递归分析
- `yuyi.py`: 语义分析器，包含了对程序静态语义的检查，而语义检查是以语法生成的语法树为基础的，此为本代码的特点
- `zhongjian`: 中间代码生成器，包含了中间代码的生成，中间代码的生成也是根据语法树生成的，可能会有缺陷，暂时未检测到
- `main.py`：UI交互程序。
- `test1-4`：测试用的简单程序（覆盖 if、while、赋值、表达式）

## 测试说明

目前已完成以下测试：

- ui优化并且现在可以绘制语法树
- 基本控制结构（if, while）的语法合法性分析
- 表达式优先级与组合规则验证
- 表达与赋值语句的综合测试
- 出现的行异常跳过暂时解决，但不保证每种行异常跳过都能解决
- 添加对变量声明的语法支持
- 解决了if（x = 0）的问题， if里面的condition不能是赋值语句
- 解决了静态语义检测的问题


目前暂未经过完整的测试的模块
- 语义分析暂未得到足够测试
- 中间代码生成也暂未得到足够的测试
- 以上两个模块实施方式均为笔者自创，可能会存在某些bug并未被愚蠢的笔者发现，若有测试到bug的情况可以反馈给笔者

## TODO

- 添加更多错误处理机制
- 完善符号表管理与类型检查功能
- 当if里面的condition为多层嵌套时，例如（）&&（）的形式，某一个（）中出现x = 0这样的形式时仍然无法识别
- 对中间代码进行优化
- 生成目标代码

